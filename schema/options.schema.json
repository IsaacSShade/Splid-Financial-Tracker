{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "options.schema.json",
  "title": "Options Config",
  "type": "object",
  "additionalProperties": false,
  "definitions": {
    "monthString": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}$",
      "description": "Calendar month in YYYY-MM format.",
      "examples": [
        "2025-08",
        "2025-09"
      ]
    }
  },
  "properties": {
    "monthSelection": {
      "type": "string",
      "enum": [
        "previous_complete",
        "latest_any"
      ],
      "default": "previous_complete",
      "description": "How the tool picks the target month when running without an explicit override."
    },
    "overrideMonth": {
      "oneOf": [
        {
          "$ref": "#/definitions/monthString"
        },
        {
          "type": "string",
          "maxLength": 0
        }
      ],
      "default": "",
      "description": "Optional YYYY-MM to pin a run to a specific month. Empty string means no override."
    },
    "backfillAll": {
      "type": "boolean",
      "default": true,
      "description": "If true, the first run produces reports for all months present in Splid (income may be 0 before startDate)."
    },
    "carryoverMode": {
      "type": "string",
      "enum": [
        "none",
        "bank_csv"
      ],
      "default": "none",
      "description": "How to adjust spending allowance for overspend from the previous month. 'none' disables carryover; 'bank_csv' will later use bank data."
    }
  },
  "required": [
    "monthSelection",
    "backfillAll",
    "carryoverMode"
  ],
  "examples": [
    {
      "monthSelection": "previous_complete",
      "overrideMonth": "",
      "backfillAll": true,
      "carryoverMode": "none"
    }
  ]
}