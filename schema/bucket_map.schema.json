{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "bucket_map.schema.json",
  "title": "Bucket Mapping Config",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "titleToBucket": {
      "type": "object",
      "description": "Map of case-insensitive regex (matched against Title) to a bucket label for breakdown. Keys may use '|' to combine synonyms.",
      "additionalProperties": {
        "type": "string",
        "minLength": 1,
        "description": "Bucket name used only for reporting breakdown. All buckets still count toward monthly living (Payments are excluded elsewhere).",
        "examples": [
          "rent",
          "utilities",
          "groceries",
          "house_supplies",
          "house_bills",
          "uncategorized"
        ]
      },
      "examples": [
        {
          "rent": "rent",
          "wifi|internet|xfinity|comcast|spectrum": "utilities",
          "electric|power|avista|pacific power|pse|seattle city light": "utilities",
          "water|sewer|garbage|trash": "utilities"
        }
      ]
    },
    "categoryToBucket": {
      "type": "object",
      "description": "Map of exact Splid Category values to a bucket label for breakdown.",
      "additionalProperties": {
        "type": "string",
        "minLength": 1
      },
      "examples": [
        {
          "Groceries": "groceries",
          "House Supplies": "house_supplies",
          "House bills": "house_bills",
          "-": "uncategorized"
        }
      ]
    },
    "paymentTitleExact": {
      "type": "array",
      "description": "Titles that indicate settle-up/payment rows to exclude from living costs. Matching is case-insensitive in code.",
      "items": {
        "type": "string",
        "minLength": 1
      },
      "uniqueItems": true,
      "default": [
        "Payment"
      ],
      "examples": [
        [
          "Payment"
        ]
      ]
    }
  },
  "required": [
    "titleToBucket",
    "categoryToBucket",
    "paymentTitleExact"
  ],
  "examples": [
    {
      "titleToBucket": {
        "rent": "rent",
        "wifi|internet|xfinity|comcast|spectrum": "utilities",
        "electric|power|avista|pacific power|pse|seattle city light": "utilities",
        "water|sewer|garbage|trash": "utilities"
      },
      "categoryToBucket": {
        "Groceries": "groceries",
        "House Supplies": "house_supplies",
        "House bills": "house_bills",
        "-": "uncategorized"
      },
      "paymentTitleExact": [
        "Payment"
      ]
    }
  ]
}